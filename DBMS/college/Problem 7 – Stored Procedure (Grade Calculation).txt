ðŸ§¾ Problem 7 â€“ Stored Procedure (Grade Calculation)
âœ… 1. Create Tables
CREATE TABLE Stud_Marks (
  Roll INT,
  Name VARCHAR(50),
  Total_Marks INT
);

CREATE TABLE Result (
  Roll INT,
  Name VARCHAR(50),
  Class VARCHAR(20)
);

âœ… 2. Insert Sample Data
INSERT INTO Stud_Marks VALUES (1, 'Amit', 1200);
INSERT INTO Stud_Marks VALUES (2, 'Pooja', 950);
INSERT INTO Stud_Marks VALUES (3, 'Raj', 880);

âœ… 3. Procedure
CREATE OR REPLACE PROCEDURE proc_Grade(r IN INT, n IN VARCHAR2, m IN INT) IS
  category VARCHAR2(20);
BEGIN
  IF m BETWEEN 990 AND 1500 THEN
    category := 'Distinction';
  ELSIF m BETWEEN 900 AND 989 THEN
    category := 'First Class';
  ELSIF m BETWEEN 825 AND 899 THEN
    category := 'Higher Second Class';
  ELSE
    category := 'Fail';
  END IF;

  INSERT INTO Result VALUES (r, n, category);
END;
/

âœ… 4. PL/SQL Block to Call Procedure
BEGIN
  FOR rec IN (SELECT * FROM Stud_Marks) LOOP
    proc_Grade(rec.Roll, rec.Name, rec.Total_Marks);
  END LOOP;
END;
/








ðŸ§¾ Problem 7 â€“ Stored Procedure (Grade Calculation â€“ MySQL)
CREATE TABLE Stud_Marks (
  Roll INT,
  Name VARCHAR(50),
  Total_Marks INT
);

CREATE TABLE Result (
  Roll INT,
  Name VARCHAR(50),
  Class VARCHAR(20)
);

INSERT INTO Stud_Marks VALUES 
(1, 'Amit', 1200),
(2, 'Pooja', 950),
(3, 'Raj', 880);

DELIMITER $$

CREATE PROCEDURE proc_Grade(IN r INT, IN n VARCHAR(50), IN m INT)
BEGIN
    DECLARE category VARCHAR(20);

    IF m BETWEEN 990 AND 1500 THEN
        SET category = 'Distinction';
    ELSEIF m BETWEEN 900 AND 989 THEN
        SET category = 'First Class';
    ELSEIF m BETWEEN 825 AND 899 THEN
        SET category = 'Higher Second Class';
    ELSE
        SET category = 'Fail';
    END IF;

    INSERT INTO Result VALUES (r, n, category);
END$$

DELIMITER ;

-- Loop through Stud_Marks table
DELIMITER $$

CREATE PROCEDURE GenerateResults()
BEGIN
    DECLARE done INT DEFAULT 0;
    DECLARE r INT;
    DECLARE n VARCHAR(50);
    DECLARE m INT;

    DECLARE cur CURSOR FOR SELECT Roll, Name, Total_Marks FROM Stud_Marks;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;

    OPEN cur;

    read_loop: LOOP
        FETCH cur INTO r, n, m;
        IF done THEN
            LEAVE read_loop;
        END IF;
        CALL proc_Grade(r, n, m);
    END LOOP;

    CLOSE cur;
END$$

DELIMITER ;

CALL GenerateResults();
SELECT * FROM Result;